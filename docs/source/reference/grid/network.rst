..
   NOTE: The files `landlab.grid.[base|raster|voronoi|radial|hex].rst` are all
   *AUTOGENERATED* from the files `text_for_XXXX.py.txt`! All changes to the
   rst files will be PERMANENTLY LOST whenever the documentation is updated.
   Make changes directly to the txt files instead.

..  _Network:

================
NetworkModelGrid
================

General class methods and attributes of the `landlab.grid.network` module
-------------------------------------------------------------------------

Landlab's network grids are implemented by the class `NetworkModelGrid`,
which inherits from `Graph` and `GraphFields`. This text lists grid methods
available for the class:

Getting Information about a Grid
--------------------------------
The following attributes, properties, and methods provide data about a
NetworkModelGrid, its geometry, and the connectivity among the various elements.
Each grid element has an ID number, which is also its position in an array that
contains information about that type of element. For example, the *x*
coordinate of node 5 would be found at `grid.node_x[5]`.

The naming of grid-element arrays is *attribute*`_at_`*element*, where
*attribute* is the name of the data in question, and *element* is the element
to which the attribute applies. For example, the property `nodes_at_link`
contains the ID of the nodes associated with each link. For example,
`nodes_at_link[3]` contains the *node ID* of the node associated with link 3.
The *attribute* is singular if there is only one value per element; for
example, there are two nodes associated with each link. It is plural when
there are multiple values per element. Exceptions to these general rules are
functions that return indices of a subset of all elements of a particular type.
For example, you can obtain an array with IDs of only the core nodes using
`core_nodes`, while `active_links` provides an array of IDs of active links
(only). Finally, attributes that represent a measurement of something, such as
the length of a link or the surface area of a cell, are described using `_of_`,
as in the example `area_of_cell`.

Information about the grid as a whole
+++++++++++++++++++++++++++++++++++++

.. currentmodule:: landlab 

.. autosummary::

    ~landlab.grid.network.NetworkModelGrid.axis_name
    ~landlab.grid.network.NetworkModelGrid.axis_units
    ~landlab.grid.network.NetworkModelGrid.size

Information about nodes
+++++++++++++++++++++++

.. currentmodule:: landlab 

.. autosummary::

    ~landlab.grid.network.NetworkModelGrid.active_links
    ~landlab.grid.network.NetworkModelGrid.adjacent_nodes_at_node
    ~landlab.grid.network.NetworkModelGrid.node_at_link_head
    ~landlab.grid.network.NetworkModelGrid.node_at_link_tail
    ~landlab.grid.network.NetworkModelGrid.nodes
    ~landlab.grid.network.NetworkModelGrid.nodes_at_link
    ~landlab.grid.network.NetworkModelGrid.number_of_nodes
    ~landlab.grid.network.NetworkModelGrid.perimeter_nodes
    ~landlab.grid.network.NetworkModelGrid.status_at_node
    ~landlab.grid.network.NetworkModelGrid.x_of_node
    ~landlab.grid.network.NetworkModelGrid.xy_of_node
    ~landlab.grid.network.NetworkModelGrid.y_of_node

Information about links
+++++++++++++++++++++++

.. currentmodule:: landlab 

.. autosummary::

    ~landlab.grid.network.NetworkModelGrid.angle_of_link
    ~landlab.grid.network.NetworkModelGrid.length_of_link
    ~landlab.grid.network.NetworkModelGrid.links_at_node
    ~landlab.grid.network.NetworkModelGrid.midpoint_of_link
    ~landlab.grid.network.NetworkModelGrid.status_at_link
    ~landlab.grid.network.NetworkModelGrid.x_of_link
    ~landlab.grid.network.NetworkModelGrid.y_of_link

Data Fields in ModelGrid
------------------------
:class:`~.ModelGrid` inherits from the :class:`~.GraphFields` class. This
provides `~.ModelGrid`, and its subclasses, with the ability to, optionally,
store data values that are associated with the different types grid elements
(nodes, cells, etc.). In particular, as part of ``GraphFields.__init__()``,
data field *groups* are added to the `GraphFields` that provide containers to
put data fields into. There is one group for each of the two grid elements
(node and link).

To access these groups, use the same methods as accessing groups with
`~.GraphFields`. ``GraphFields.__init__()`` adds the following attributes to
itself that provide access to the values groups:

.. autosummary::
    :nosignatures:

    ~landlab.grid.network.NetworkModelGrid.at_node
    ~landlab.grid.network.NetworkModelGrid.at_link

Each of these attributes returns a ``dict``-like object whose keys are value
names as strings and values are numpy arrays that gives quantities at
grid elements.


Create Field Arrays
+++++++++++++++++++
:class:`~.ModelGrid` inherits several useful methods for creating new data
fields and adding new data fields to a ModelGrid instance. Methods to add or
create a new data array follow the ``numpy`` syntax for creating arrays. The
folowing methods create and, optionally, initialize new arrays. These arrays
are of the correct size but a new field will not be added to the field:

.. autosummary::
    :nosignatures:

    ~landlab.field.graph_field.GraphFields.empty
    ~landlab.field.graph_field.GraphFields.ones
    ~landlab.field.graph_field.GraphFields.zeros

Add Fields to a ModelGrid
+++++++++++++++++++++++++
Unlike with the equivalent numpy functions, these do not take a size argument
as the size of the returned arrays is determined from the size of the
ModelGrid. However, the keyword arguments are the same as those of the numpy
equivalents.

The following methods will create a new array and add a reference to that
array to the ModelGrid:

.. autosummary::
    :nosignatures:

    ~landlab.grid.raster.RasterModelGrid.add_empty
    ~landlab.grid.raster.RasterModelGrid.add_field
    ~landlab.grid.raster.RasterModelGrid.add_ones
    ~landlab.grid.raster.RasterModelGrid.add_zeros
    ~landlab.grid.raster.RasterModelGrid.delete_field

These methods operate in the same way as the previous set except that, in
addition to creating a new array, the newly-created array is added to the
ModelGrid. The calling signature is the same but with the addition of an
argument that gives the name of the new field as a string. The additional
method, :meth:`~.GraphFields.add_field`, adds a previously allocation
array to the ModelGrid. If the array is of the incorrect size it will raise
``ValueError``.

Query Fields
++++++++++++
Use the following methods/attributes get information about the stored data
fields:

.. autosummary::
    :nosignatures:

    ~landlab.field.graph_field.GraphFields.size
    ~landlab.field.graph_field.GraphFields.keys
    ~landlab.field.graph_field.GraphFields.has_group
    ~landlab.field.graph_field.GraphFields.has_field
    ~landlab.grid.network.NetworkModelGrid.field_units
    ~landlab.grid.network.NetworkModelGrid.field_values
    ~landlab.field.graph_field.GraphFields.groups

i.e., call, e.g. mg.has_field('node', 'my_field_name')

Gradients, fluxes, and divergences on the grid
----------------------------------------------

Landlab is designed to easily calculate gradients in quantities across the
grid, and to construct fluxes and flux divergences from them. Because these
calculations tend to be a little more involved than property lookups, the
methods tend to start with `calc_`.

.. currentmodule:: landlab 

.. autosummary::

    ~landlab.grid.network.NetworkModelGrid.calc_grad_at_link

Mappers
-------

These methods allow mapping of values defined on one grid element type onto a
second, e.g., mapping upwind node values onto links, or mean link values onto
nodes.

.. currentmodule:: landlab 

.. autosummary::

    ~landlab.grid.network.NetworkModelGrid.map_downwind_node_link_max_to_node
    ~landlab.grid.network.NetworkModelGrid.map_downwind_node_link_mean_to_node
    ~landlab.grid.network.NetworkModelGrid.map_link_head_node_to_link
    ~landlab.grid.network.NetworkModelGrid.map_link_tail_node_to_link
    ~landlab.grid.network.NetworkModelGrid.map_max_of_link_nodes_to_link
    ~landlab.grid.network.NetworkModelGrid.map_max_of_node_links_to_node
    ~landlab.grid.network.NetworkModelGrid.map_mean_of_link_nodes_to_link
    ~landlab.grid.network.NetworkModelGrid.map_min_of_link_nodes_to_link
    ~landlab.grid.network.NetworkModelGrid.map_min_of_node_links_to_node
    ~landlab.grid.network.NetworkModelGrid.map_upwind_node_link_max_to_node
    ~landlab.grid.network.NetworkModelGrid.map_upwind_node_link_mean_to_node
    ~landlab.grid.network.NetworkModelGrid.map_value_at_downwind_node_link_max_to_node
    ~landlab.grid.network.NetworkModelGrid.map_value_at_max_node_to_link
    ~landlab.grid.network.NetworkModelGrid.map_value_at_min_node_to_link
    ~landlab.grid.network.NetworkModelGrid.map_value_at_upwind_node_link_max_to_node

Boundary condition control
--------------------------

These are the primary properties for getting and setting the grid boundary
conditions. Changes made to :meth:`~.ModelGrid.status_at_node` and
:meth:`~.ModelGrid.status_at_node` will automatically update the conditions
defined at other grid elements automatically.

.. currentmodule:: landlab 

.. autosummary::

    ~landlab.grid.network.NetworkModelGrid.active_links
    ~landlab.grid.network.NetworkModelGrid.perimeter_nodes
    ~landlab.grid.network.NetworkModelGrid.status_at_link
    ~landlab.grid.network.NetworkModelGrid.status_at_node

Identifying node subsets
------------------------

These methods are useful in identifying subsets of nodes, e.g., closest node
to a point; nodes at edges.

.. currentmodule:: landlab 

.. autosummary::

    ~landlab.grid.network.NetworkModelGrid.active_links
    ~landlab.grid.network.NetworkModelGrid.perimeter_nodes

